#!/usr/bin/env bash
# Vlad's Aliases

# Sudo
alias sudo='sudo ' # Allow aliases to work with sudo

# Ansible
alias agx='ansible-galaxy install --force --role-file requirements.yml'
alias apb='ansible-playbook site.yml'

# Misc
alias rmdbctrash="find . -name *\\ \\(*conflicted* -exec mv -v {} ~/.Trash/ \\;" # recursively move Dropbox conflicted files to Trash

# Network
alias ip='ip -c'
alias myip='dig +short myip.opendns.com. A @208.67.222.222'
alias myip6='dig +short myip.opendns.com. AAAA @2620:119:35::35'

# Temp Dir
alias tmp='cd $(mktemp -d 2>/dev/null || mktemp -d -t "mytmpdir")'
alias tmpf='vim $(mktemp 2>/dev/null || mktemp -t "mytmpfile")'

# Generate Salt
alias genSalt='openssl rand -base64 32'

# RUBY Bundle
alias be='bundle exec'
alias bup='bundle update'
alias ber='bundle exec rake'

# DOCKER
alias dl='docker ps -lq'
alias dlc='docker ps'
alias dla='docker ps -a'
alias dli='docker images'
alias drm='docker system prune -f'
alias dke='docker exec -it'
alias dru='docker run -it --rm -v $(pwd):/docker ubuntu bash'

# Pass options to free
alias meminfo='free -m -l -t'

# Get top process eating memory
alias psmem='ps auxf | sort -nr -k 4'
alias psmem10='ps auxf | sort -nr -k 4 | head -10'

# Get top process eating cpu
alias pscpu='ps auxf | sort -nr -k 3'
alias pscpu10='ps auxf | sort -nr -k 3 | head -10'

# UBUNTU ALIASES
if [[ "$(lsb_release --id --short 2>/dev/null)" == Ubuntu ]]; then
  alias vupdt='sudo apt-get update && sudo apt-get -qy dist-upgrade && sudo apt-get -y autoremove --purge && sudo apt-get -qy clean'
fi

# OSX ALIASES
if [[ $(uname) == Darwin ]]; then
  # Reload DNS
  alias dnsflush='dscacheutil -flushcache'
  alias dnsreset='sudo killall -HUP mDNSResponder && echo macOS DNS Cache Reset'

  # Restart CUPS
  alias restart_cups='sudo launchctl stop org.cups.cupsd; sudo launchctl start org.cups.cupsd'

  # Suspend
  alias away='/System/Library/CoreServices/Menu\ Extras/User.menu/Contents/Resources/CGSession -suspend'

  # Show/hide hidden files in Finder
  alias show='defaults write com.apple.finder AppleShowAllFiles -bool true && killall Finder'
  alias hide='defaults write com.apple.finder AppleShowAllFiles -bool false && killall Finder'

  # Recursively delete `.DS_Store` files
  alias cleanup="find . -type f -name '*.DS_Store' -ls -delete"

  # Misc
  alias pubkey="more ~/.ssh/id_ed25519.pub | pbcopy | echo '=> Public key copied to pasteboard.'"
fi
