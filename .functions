### Functions #################################################################
## Logging stuff.
is_color()  { [[ $TERM =~ xterm ]] ;}
is_silent() { [[ $silent == true ]] ;}
function e_header() {
  is_silent || { is_color && echo -e "\n\033[1m$@\033[0m" || echo -e "\n$@" ;}
}
function e_ok() {
  is_silent || \
    { is_color && echo -e "  \033[1;32m✔\033[0m  $@" || echo "  ✔  $@" ;}
}
function e_error() {
  is_silent || \
    { is_color && echo -e "  \033[1;31m✖\033[0m  $@" || echo "  ✖  $@" ;}
}
function e_warn() {
  is_silent || \
    { is_color && echo -e "  \033[1;33m  $@\033[0m" || echo "    $@" ;}
}
function e_arrow() {
  is_silent || \
    { is_color && echo -e "  \033[0;34m➜\033[0m  $@" || echo "  ➜  $@" ;}
}
function e_footer() {
  is_silent || \
    { is_color && echo -e "\n\033[1m$@\033[0m\n" || echo -e "\n$@\n" ;}
}

# $1 => error message, $2 => exit code
function e_abort()   { e_error $1; exit $2; }

## OS detection
is_osx()    { [[ $(uname) == Darwin ]] || return 1; }
is_linux()  { [[ $(uname) == Linux ]] || return 1; }
is_ubuntu() { [[ "$(cat /etc/issue 2> /dev/null)" =~ Ubuntu ]] || return 1; }

# Look for '.functions.d' in the current directory and source all files from it
functions="$(ls $( cd "$( dirname "${BASH_SOURCE[0]}" )/.functions.d" 2>/dev/null && pwd -P )/*.sh 2>/dev/null)"
for func in $functions; do [ -s $func ] && . $func; done

# vim: ft=sh
