#!/usr/bin/env bash

SESSION_NAME='vgh'
ROOT_DIR="$HOME/Dropbox/Projects"

tmux has-session -t ${SESSION_NAME}

# open these only if we don't already have a session
# if we do just attach to that session
if [ $? != 0 ]; then
  # -n => name of window
  tmux new-session -d -s ${SESSION_NAME} -c "${ROOT_DIR}" -n PRJ

  tmux new-window -n OGA -t ${SESSION_NAME} -c "${ROOT_DIR}"
  tmux split-window -h -t ${SESSION_NAME}:2 -c "${ROOT_DIR}"
  tmux split-window -v -t ${SESSION_NAME}:2 -c "${ROOT_DIR}"

  tmux send-keys -t ${SESSION_NAME}:2.1 'oga' C-m
  tmux send-keys -t ${SESSION_NAME}:2.2 'oga' C-m
  tmux send-keys -t ${SESSION_NAME}:2.3 'oga' C-m

  # start out on the first window when we attach
  tmux select-window -t ${SESSION_NAME}:1
fi

tmux attach-session -t ${SESSION_NAME}
